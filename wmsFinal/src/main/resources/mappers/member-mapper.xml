<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">

	<resultMap type="member" id="memberResultSet">
		<result column="MEMBER_NO" property="memberNo"/>	
		<result column="MEMBER_ID" property="memberId"/>	
		<result column="MEMBER_PWD" property="memberPwd"/>	
		<result column="MEMBER_NAME" property="memberName"/>	
		<result column="EMAIL" property="email"/>	
		<result column="GENDER" property="gender"/>	
		<result column="PHONE" property="phone"/>	
		<result column="MEMBER_STATUS" property="memberStatus"/>	
		<result column="MARK" property="mark"/>	
		<result column="BIRTH_DATE" property="birthDate"/>	
		<result column="POINT" property="point"/>	
		<result column="PLATFORM" property="platForm"/>	
		<result column="AUTHKEY" property="authKey"/>	
	</resultMap>
	
	<resultMap id="paymentResultSet" type = "payment">
		<result column="PAYMENT_NO" property="paymentNo"/>
		<result column="MEMBER_NO" property="memberNo"/>
		<result column="MARK_NO" property="markNo"/>
		<result column="PAYMENT_DATE" property="paymentDate"/>
		<result column="PAYMENT_METHOD" property="paymentMethod"/>
	</resultMap>
	
	
	
	<select id="ajaxCheckId" resultType="_int" parameterType="String">
		
		SELECT COUNT(*) FROM MEMBER
		WHERE MEMBER_ID = #{memberId}
		
	</select>
	
	<select id="ajaxAuthEmail" resultType="_int" parameterType="String">
		
		SELECT COUNT(*) FROM MEMBER
		WHERE EMAIL = #{email}
		
	</select>
	
	<insert id="insertMember" parameterType="member">
		
		INSERT INTO 
		MEMBER
		(MEMBER_NO, MEMBER_ID, MEMBER_PWD, MEMBER_NAME, EMAIL, PHONE, BIRTH_DATE, PLATFORM, AUTHKEY)
		VALUES
		(SEQ_MNO.NEXTVAL, #{memberId}, #{memberPwd}, #{memberName}, #{email}, #{phone}, #{birthDate}, #{platForm}, #{authKey})
		
	</insert>
	
	<select id="loginMember" parameterType="member" resultMap="memberResultSet">
	
		SELECT * FROM MEMBER 
		WHERE MEMBER_ID = #{memberId}
		AND MEMBER_STATUS = 'Y'
	
	</select>
	<!-- 
	로그인용 쿼리문
	<select id="loginMember" resultMap="memberResultSet" parameterType="member">
		select
				USER_ID
				,USER_PWD
				,USER_NAME
				,EMAIL
				,GENDER
				,AGE
				,PHONE
				,ADDRESS
				,ENROLL_DATE
				,MODIFY_DATE
				,STATUS
			  FROM
				MEMBER
			WHERE
				USER_ID = #{userId}
			  AND
			  	STATUS = 'Y'
	
	
	</select>

	회원 가입용 쿼리문
	<insert id="insertMember" parameterType="member">
		INSERT INTO
					 MEMBER
							(
							USER_ID
							,USER_PWD
							,USER_NAME
							,EMAIL
							,GENDER
							,AGE
							,PHONE
							,ADDRESS
							)
					VALUES
							(
							#{userId}
							,#{userPwd}
							,#{userName}
							,#{email}
							,#{gender}
							,#{age}
							,#{phone}
							,#{address}
							)
	
	</insert>
	
	회원 정보 수정용 쿼리문
	
	<update id="updateMember" >
		UPDATE
				MEMBER
			SET
				USER_NAME = #{userName}
				,EMAIL = #{email}
				,AGE = #{age}
				,PHONE = #{phone}
				,ADDRESS = #{address}
				,GENDER = #{gender}
				,MODIFY_DATE = SYSDATE
			WHERE 
				USER_ID = #{userId}
	</update>
	
	<update id="deleteMember">
		UPDATE
				MEMBER
			SET
				STATUS = 'N'
			WHERE
				USER_Id = #{userId}
	</update> -->
	
	
	
	
	
	
	

</mapper>
